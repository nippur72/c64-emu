------- FILE terminal.asm LEVEL 1 PASS 2
      1  0882		       d7 f0	   MODEM_IN   EQU	$D7F0
      2  0882		       d7 f1	   MODEM_ACK  EQU	$D7F1
      3  0882		       d7 f2	   MODEM_OUT  EQU	$D7F2
      4  0882		       d7 f3	   MODEM_READY EQU	$D7F3
      5  0882 ????
      6  0882 ????				      PROCESSOR	6502
      7  0882 ????
      8  0882 ????
      9  0882 ????
     10  0882 ????
     11  0882 ????
     12  0882 ????
     13  0882 ????
     14  0882 ????
     15  0882 ????
     16  0882 ????
     17  0882 ????
     18  0882 ????
     19  0882 ????
     20  0882 ????
     21  0882 ????
     22  0882 ????
     23  0882 ????
     24  0882 ????
     25  0882 ????
     26  0882 ????
     27  0882 ????
     28  0882 ????
     29  0882 ????
     30  0882 ????
     31  0882 ????
     32  0882 ????
     33  0882 ????
     34  0882 ????
     35  0882 ????
     36  0882 ????
     37  0882 ????
     38  0882 ????
     39  0882 ????
     40  0882 ????
     41  0882 ????
     42  0882 ????
     43  0882 ????
     44  0882 ????
     45  0882 ????
     46  0882 ????
     47  0882 ????
     48  0882 ????
     49  0882 ????
     50  0882 ????
     51  0882 ????
     52  0882 ????
     53  0882 ????
     54  0882 ????
     55  0882 ????
     56  0882 ????
     57  0882 ????
     58  0882 ????
     59  0882 ????
     60  0882 ????
     61  0882 ????
     62  0882 ????
     63  0882 ????
     64  0882 ????
     65  0882 ????
     66  0882 ????
     67  0882 ????
     68  0882 ????
     69  0882 ????
     70  0882 ????
     71  0882 ????
     72  0882 ????
     73  0882 ????
     74  0882 ????
     75  0882 ????
     76  0882 ????
     77  0882 ????
     78  0882 ????
     79  0882 ????
     80  0882 ????
     81  0882 ????
     82  0882 ????
     83  0882 ????
     84  0882 ????
     85  0882 ????
     86  0882 ????
     87  0882 ????
     88  0882 ????
     89  0882 ????
     90  0882 ????
     91  0882 ????
     92  0882 ????
     93  0882 ????
     94  0882 ????
     95  0882 ????
     96  0882 ????
     97  0882 ????
     98  0882 ????
     99  0882 ????
    100  0882 ????
    101  0882 ????
    102  0882 ????
    103  0882 ????
    104  0882 ????
    105  0882 ????
    106  0882 ????
    107  0882 ????
    108  0882 ????
    109  0882 ????
    110  0882 ????
    111  0882 ????
    112  0882 ????
    113  0882 ????
    114  0882 ????
    115  0882 ????
    116  0882 ????
    117  0882 ????
    118  0882 ????
    119  0882 ????
    120  0882 ????
    121  0882 ????
    122  0882 ????
    123  0882 ????
    124  0882 ????
    125  0882 ????
    126  0882 ????
    127  0882 ????
    128  0882 ????
    129  0882 ????
    130  0882 ????
    131  0882 ????
    132  0882 ????
    133  0882 ????
    134  0882 ????
    135  0882 ????
    136  0882 ????
    137  0882 ????
    138  0882 ????
    139  0882 ????
    140  0882 ????
    141  0882 ????
    142  0882 ????
    143  0882 ????
    144  0882 ????
    145  0882 ????
    146  0882 ????
    147  0882 ????
    148  0882 ????
    149  0882 ????
    150  0882 ????
    151  0882 ????
    152  0882 ????
    153  0882 ????
    154  0882 ????
    155  0882 ????
    156  0882 ????
    157  0882 ????
    158  0882 ????
    159  0882 ????
    160  0882 ????
    161  0882 ????
    162  0882 ????
    163  0882 ????
    164  0882 ????
    165  0882 ????
    166  0882 ????
    167  0882 ????
    168  0882 ????
    169  0882 ????
    170  0882 ????
    171  0882 ????
    172  0882 ????
    173  0882 ????
    174  0882 ????
    175  0882 ????
    176  0882 ????
    177  0882 ????
    178  0882 ????
    179  0882 ????
    180  0882 ????
    181  0882 ????
    182  0882 ????
    183  0882 ????
    184  0882 ????
    185  0882 ????
    186  0882 ????
    187  0882 ????
    188  0882 ????
    189  0882 ????
    190  0882 ????
    191  0882 ????
    192  0882 ????
    193  0882 ????
    194  0882 ????
    195  0882 ????
    196  0882 ????
    197  0882 ????
    198  0882 ????
    199  0882 ????
    200  0882 ????
    201  0882 ????
    202  0882 ????
    203  0882 ????
    204  0882 ????
    205  0882 ????
    206  0882 ????
    207  0882 ????
    208  0882 ????
    209  0882 ????
    210  0882 ????
    211  0882 ????
    212  0882 ????
    213  0882 ????
    214  0882 ????
    215  0882 ????
    216  0882 ????
    217  0882 ????
    218  0882 ????
    219  0882 ????
    220  0882 ????
    221  0882 ????
    222  0882 ????
    223  0882 ????
    224  0882 ????
    225  0882 ????
    226  0882 ????
    227  0882 ????
    228  0882 ????
    229  0882 ????
    230  0882 ????
    231  0882 ????
    232  0882 ????
    233  0882 ????
    234  0882 ????
    235  0882 ????
    236  0882 ????
    237  0882 ????
    238  0882 ????
    239  0882 ????
    240  0882 ????
    241  0882 ????
    242  0882 ????
    243  0882 ????
    244  0882 ????
    245  0882 ????
    246  0882 ????
    247  0882 ????
    248  0882 ????
    249  0882 ????
    250  0882 ????
    251  0882 ????
    252  0882 ????
    253  0882 ????
    254  0882 ????
    255  0882 ????
    256  0882 ????
    257  0882 ????
    258  0882 ????
    259  0882 ????
    260  0882 ????
    261  0882 ????
    262  0882 ????
    263  0882 ????
    264  0882 ????
    265  0882 ????
    266  0882 ????
    267  0882 ????
    268  0882 ????
    269  0882 ????
    270  0882 ????
    271  0882 ????
    272  0882 ????
    273  0882 ????
    274  0882 ????
    275  0882 ????
    276  0882 ????
    277  0882 ????
    278  0882 ????
    279  0882 ????
    280  0882 ????
    281  0882 ????
    282  0882 ????
    283  0882 ????
    284  0882 ????
    285  0882 ????
    286  0882 ????
    287  0882 ????
    288  0882 ????
    289  0882 ????
    290  0882 ????
    291  0882 ????
    292  0882 ????
    293  0882 ????
    294  0882 ????
    295  0882 ????
    296  0882 ????
    297  0882 ????
    298  0882 ????
    299  0882 ????
    300  0882 ????
    301  0882 ????
    302  0882 ????
    303  0882 ????
    304  0882 ????
    305  0882 ????
    306  0882 ????
    307  0882 ????
    308  0882 ????
    309  0882 ????
    310  0882 ????
    311  0882 ????
    312  0882 ????
    313  0882 ????
    314  0882 ????
    315  0882 ????
    316  0882 ????
    317  0882 ????
    318  0882 ????
    319  0882 ????
    320  0882 ????
    321  0882 ????
    322  0882 ????
    323  0882 ????
    324  0882 ????
    325  0882 ????
    326  0882 ????
    327  0882 ????
    328  0882 ????
    329  0882 ????
    330  0882 ????
    331  0882 ????
    332  0882 ????
    333  0882 ????
    334  0882 ????
    335  0882 ????
    336  0882 ????
    337  0882 ????
    338  0882 ????
    339  0882 ????
    340  0882 ????
    341  0882 ????
    342  0882 ????
    343  0882 ????
    344  0882 ????
    345  0882 ????
    346  0882 ????
    347  0882 ????
    348  0882 ????
    349  0882 ????
    350  0882 ????
    351  0882 ????
    352  0882 ????
    353  0882 ????
    354  0882 ????
    355  0882 ????
    356  0882 ????
    357  0882 ????
    358  0882 ????
    359  0882 ????
    360  0882 ????
    361  0882 ????
    362  0882 ????
    363  0882 ????
    364  0882 ????
    365  0882 ????
    366  0882 ????
    367  0882 ????
    368  0882 ????
    369  0882 ????
    370  0882 ????
    371  0882 ????
    372  0882 ????
    373  0882 ????
    374  0882 ????
    375  0882 ????
    376  0882 ????
    377  0882 ????
    378  0882 ????
    379  0882 ????
    380  0882 ????
    381  0882 ????
    382  0882 ????
    383  0882 ????
    384  0882 ????
    385  0882 ????
    386  0882 ????
    387  0882 ????
    388  0882 ????
    389  0882 ????
    390  0882 ????
    391  0882 ????
    392  0882 ????
    393  0882 ????
    394  0882 ????
    395  0882 ????
    396  0882 ????
    397  0882 ????
    398  0882 ????
    399  0882 ????
    400  0882 ????
    401  0882 ????
    402  0882 ????
    403  0882 ????
    404  0882 ????
    405  0882 ????
    406  0882 ????
    407  0882 ????
    408  0882 ????
    409  0882 ????
    410  0882 ????
    411  0882 ????
    412  0882 ????
    413  0882 ????
    414  0882 ????
    415  0882 ????
    416  0882 ????
    417  0882 ????
    418  0882 ????
    419  0882 ????
    420  0882 ????
    421  0882 ????
    422  0882 ????
    423  0882 ????
    424  0882 ????
    425  0882 ????
    426  0882 ????
    427  0882 ????
    428  0882 ????
    429  0882 ????
    430  0882 ????
    431  0882 ????
    432  0882 ????
    433  0882 ????
    434  0882 ????
    435  0882 ????
    436  0882 ????
    437  0882 ????
    438  0882 ????
    439  0882 ????
    440  0882 ????
    441  0882 ????
    442  0882 ????
    443  0882 ????
    444  0882 ????
    445  0882 ????
    446  0882 ????
    447  0882 ????
    448  0882 ????
    449  0882 ????
    450  0882 ????
    451  0882 ????
    452  0882 ????
    453  0882 ????
    454  0882 ????
    455  0882 ????
    456  0882 ????
    457  0882 ????
    458  0882 ????
    459  0882 ????
    460  0882 ????
    461  0882 ????	       ff e4	   GETIN      =	$FFE4
    462  0882 ????	       e5 44	   CLRSCN     =	$E544
    463  0882 ????	       ab 1e	   PRNSTR     =	$AB1E
    464  0882 ????	       e5 66	   GOHOME     =	$E566
    465  0882 ????	       bd cd	   PRNINT     =	$BDCD
    466  0882 ????
    467  0882 ????
    468  0882 ????
    469  0882 ????	       00 d1	   CURSOR_PTR =	209
    470  0882 ????	       00 a2	   JIFFY_CLOCK =	162
    471  0882 ????	       02 86	   CRSRCOL    =	646
    472  0882 ????	       00 01	   MEMORY_CONFIG =	1
    473  0882 ????
    474  0882 ????
    475  0882 ????
    476  0882 ????	       00 00	   COLOR_BLACK =	0
    477  0882 ????	       00 01	   COLOR_WHITE =	1
    478  0882 ????	       00 02	   COLOR_RED  =	2
    479  0882 ????	       00 03	   COLOR_CYAN =	3
    480  0882 ????	       00 04	   COLOR_MAGENTA =	4
    481  0882 ????	       00 05	   COLOR_GREEN =	5
    482  0882 ????	       00 06	   COLOR_BLUE =	6
    483  0882 ????	       00 07	   COLOR_YELLOW =	7
    484  0882 ????
    485  0882 ????
    486  0882 ????
    487  0882 ????
    488  0882 ????	       00 28	   SCREEN_COLS =	40
    489  0882 ????	       00 19	   SCREEN_ROWS =	25
    490  0882 ????	       04 00	   VIDEO_RAM  =	1024
    491  0882 ????	       d8 00	   COLOR_RAM  =	55296
    492  0882 ????	       00 d4	   COLOR_PAGE_OFFSET =	((COLOR_RAM - VIDEO_RAM) / 256)
    493  0882 ????	       08 01	   BASIC_RAM  =	2049
    494  0882 ????	       d0 12	   RASTER     =	$D012
    495  0882 ????	       d0 00	   ROMCHAR    =	$D000
    496  0882 ????	       d0 20	   BORDER     =	53280
    497  0882 ????	       d0 21	   BACKGROUND =	53281
    498  0882 ????
    499  0882 ????
    500  0882 ????
    501  0882 ????
    502  0882 ????
    503  0882 ????
    504  0882 ????
    505  0882 ????
    506  0882 ????
    507  0882 ????
    508  0882 ????
    509  0882 ????
    510  0882 ????
    511  0882 ????
    512  0882 ????
    513  0882 ????
    514  0882 ????
    515  0882 ????
    516  0882 ????
    517  0882 ????
    518  0882 ????
    519  0882 ????
    520  0882 ????
    521  0882 ????
    522  0882 ????
    523  0882 ????
    524  0882 ????
    525  0882 ????
    526  0882 ????
    527  0882 ????
    528  0882 ????
    529  0882 ????
    530  0882 ????
    531  0882 ????
    532  0882 ????
    533  0882 ????
    534  0882 ????
    535  0882 ????
    536  0882 ????
    537  0882 ????
    538  0882 ????
    539  0882 ????
    540  0882 ????
    541  0882 ????
    542  0882 ????
    543  0882 ????
    544  0882 ????
    545  0882 ????
    546  0882 ????
    547  0882 ????
    548  0882 ????
    549  0882 ????
    550  0882 ????
    551  0882 ????
    552  0882 ????
    553  0882 ????
    554  0882 ????
    555  0882 ????
    556  0882 ????
    557  0882 ????
    558  0882 ????
    559  0882 ????
    560  0882 ????
    561  0882 ????	       ff e4	   GETIN      =	$FFE4
    562  0882 ????	       ff d2	   CHROUT     =	$FFD2
    563  0882 ????
    564  0801					      ORG	BASIC_RAM
    565  0801
    566  0801
    567  0801
    568  0801
    569  0801
    570  0801
    571  0801
    572  0801
    573  0801		       0d 08 0a 00*BASIC_ROW_0 BYTE.b	[BASIC_ROW_1%256],[BASIC_ROW_1/256],[10%256],[10/256],153,32,34,5,147,34,59,0
    574  080d		       1b 08 14 00*BASIC_ROW_1 BYTE.b	[BASIC_ROW_2%256],[BASIC_ROW_2/256],[20%256],[20/256],151,32,53,51,50,56,48,44,48,0
    575  081b		       29 08 1e 00*BASIC_ROW_2 BYTE.b	[BASIC_ROW_3%256],[BASIC_ROW_3/256],[30%256],[30/256],151,32,53,51,50,56,49,44,48,0
    576  0829		       35 08 28 00*BASIC_ROW_3 BYTE.b	[BASIC_ROW_4%256],[BASIC_ROW_4/256],[40%256],[40/256],158,32,[[[TERMINAL%100000]-[TERMINAL%10000]]/10000+$30],[[[TERMINAL%10000]-[TERMINAL%1000]]/1000+$30],[[[TERMINAL%1000]-[TERMINAL%100]]/100+$30],[[[TERMINAL%100]-[TERMINAL%10]]/10+$30],[[[TERMINAL%10]-[TERMINAL%1]]/1+$30],0
    577  0835		       00 00	   BASIC_ROW_4 BYTE.b	0,0
    578  0837
    579  0837				   TERMINAL
    580  0837		       ad f3 d7 	      LDA	MODEM_READY
    581  083a				   IF_575_START
    582  083a		       c9 00		      CMP	#0
    583  083c		       f0 21		      BEQ	IF_575_ELSE
    584  083e		       20 71 08 	      JSR	CURSOR_OFF
    585  0841				   DO_577_START
    586  0841		       a2 00		      LDX	#0
    587  0843		       86 d4		      STX	$D4
    588  0845		       86 d8		      STX	$D8
    589  0847		       ad f0 d7 	      LDA	MODEM_IN
    590  084a		       20 d2 ff 	      JSR	CHROUT
    591  084d		       a9 00		      LDA	#0
    592  084f		       8d f1 d7 	      STA	MODEM_ACK
    593  0852		       a9 01		      LDA	#1
    594  0854		       8d f1 d7 	      STA	MODEM_ACK
    595  0857		       ad f3 d7 	      LDA	MODEM_READY
    596  085a		       d0 e5		      BNE	DO_577_START
    597  085c				   DO_577_END
    598  085c
    599  085c		       20 6c 08 	      JSR	CURSOR_ON
    600  085f				   IF_575_ELSE
    601  085f				   IF_575_END
    602  085f
    603  085f		       20 e4 ff 	      JSR	GETIN
    604  0862				   IF_595_START
    605  0862		       c9 00		      CMP	#0
    606  0864		       f0 03		      BEQ	IF_595_ELSE
    607  0866		       8d f2 d7 	      STA	MODEM_OUT
    608  0869				   IF_595_ELSE
    609  0869				   IF_595_END
    610  0869
    611  0869
    612  0869		       4c 37 08 	      JMP	TERMINAL
    613  086c
    614  086c
    615  086c
    616  086c
    617  086c				   CURSOR_ON
    618  086c		       a0 00		      LDY	#$00
    619  086e		       84 cc		      STY	$CC
    620  0870		       60		      RTS
    621  0871
    622  0871				   CURSOR_OFF
    623  0871		       a4 cc		      LDY	$CC
    624  0873				   IF_612_START
    625  0873		       d0 08		      BNE	IF_612_ELSE
    626  0875		       a0 01		      LDY	#$01
    627  0877		       84 cd		      STY	$CD
    628  0879				   DO_610_START
    629  0879		       a4 cf		      LDY	$CF
    630  087b		       d0 fc		      BNE	DO_610_START
    631  087d				   DO_610_END
    632  087d
    633  087d				   IF_612_ELSE
    634  087d				   IF_612_END
    635  087d		       a0 ff		      LDY	#$FF
    636  087f		       84 cc		      STY	$CC
    637  0881		       60		      RTS
    638  0882
    639  0882
    640  0882
    641  0882
    642  0882
    643  0882
    644  0882
    645  0882
    646  0882
    647  0882
    648  0882
    649  0882
    650  0882
    651  0882
    652  0882
    653  0882
    654  0882
    655  0882
    656  0882
    657  0882
    658  0882
    659  0882
    660  0882
    661  0882
    662  0882
    663  0882
