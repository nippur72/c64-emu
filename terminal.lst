------- FILE terminal.asm LEVEL 1 PASS 2
      1  0875		       d7 f2	   MODEM_DATA_OUT EQU	$D7F2
      2  0875		       d7 f0	   MODEM_DATA_IN EQU	$D7F0
      3  0875		       d7 f3	   MODEM_DATA_REQ EQU	$D7F3
      4  0875		       d7 f1	   MODEM_ACK  EQU	$D7F1
      5  0875		       d7 f4	   MODEM_CONNST EQU	$D7F4
      6  0875 ????
      7  0875 ????				      PROCESSOR	6502
      8  0875 ????
      9  0875 ????
     10  0875 ????
     11  0875 ????
     12  0875 ????
     13  0875 ????
     14  0875 ????
     15  0875 ????
     16  0875 ????
     17  0875 ????
     18  0875 ????
     19  0875 ????
     20  0875 ????
     21  0875 ????
     22  0875 ????
     23  0875 ????
     24  0875 ????
     25  0875 ????
     26  0875 ????
     27  0875 ????
     28  0875 ????
     29  0875 ????
     30  0875 ????
     31  0875 ????
     32  0875 ????
     33  0875 ????
     34  0875 ????
     35  0875 ????
     36  0875 ????
     37  0875 ????
     38  0875 ????
     39  0875 ????
     40  0875 ????
     41  0875 ????
     42  0875 ????
     43  0875 ????
     44  0875 ????
     45  0875 ????
     46  0875 ????
     47  0875 ????
     48  0875 ????
     49  0875 ????
     50  0875 ????
     51  0875 ????
     52  0875 ????
     53  0875 ????
     54  0875 ????
     55  0875 ????
     56  0875 ????
     57  0875 ????
     58  0875 ????
     59  0875 ????
     60  0875 ????
     61  0875 ????
     62  0875 ????
     63  0875 ????
     64  0875 ????
     65  0875 ????
     66  0875 ????
     67  0875 ????
     68  0875 ????
     69  0875 ????
     70  0875 ????
     71  0875 ????
     72  0875 ????
     73  0875 ????
     74  0875 ????
     75  0875 ????
     76  0875 ????
     77  0875 ????
     78  0875 ????
     79  0875 ????
     80  0875 ????
     81  0875 ????
     82  0875 ????
     83  0875 ????
     84  0875 ????
     85  0875 ????
     86  0875 ????
     87  0875 ????
     88  0875 ????
     89  0875 ????
     90  0875 ????
     91  0875 ????
     92  0875 ????
     93  0875 ????
     94  0875 ????
     95  0875 ????
     96  0875 ????
     97  0875 ????
     98  0875 ????
     99  0875 ????
    100  0875 ????
    101  0875 ????
    102  0875 ????
    103  0875 ????
    104  0875 ????
    105  0875 ????
    106  0875 ????
    107  0875 ????
    108  0875 ????
    109  0875 ????
    110  0875 ????
    111  0875 ????
    112  0875 ????
    113  0875 ????
    114  0875 ????
    115  0875 ????
    116  0875 ????
    117  0875 ????
    118  0875 ????
    119  0875 ????
    120  0875 ????
    121  0875 ????
    122  0875 ????
    123  0875 ????
    124  0875 ????
    125  0875 ????
    126  0875 ????
    127  0875 ????
    128  0875 ????
    129  0875 ????
    130  0875 ????
    131  0875 ????
    132  0875 ????
    133  0875 ????
    134  0875 ????
    135  0875 ????
    136  0875 ????
    137  0875 ????
    138  0875 ????
    139  0875 ????
    140  0875 ????
    141  0875 ????
    142  0875 ????
    143  0875 ????
    144  0875 ????
    145  0875 ????
    146  0875 ????
    147  0875 ????
    148  0875 ????
    149  0875 ????
    150  0875 ????
    151  0875 ????
    152  0875 ????
    153  0875 ????
    154  0875 ????
    155  0875 ????
    156  0875 ????
    157  0875 ????
    158  0875 ????
    159  0875 ????
    160  0875 ????
    161  0875 ????
    162  0875 ????
    163  0875 ????
    164  0875 ????
    165  0875 ????
    166  0875 ????
    167  0875 ????
    168  0875 ????
    169  0875 ????
    170  0875 ????
    171  0875 ????
    172  0875 ????
    173  0875 ????
    174  0875 ????
    175  0875 ????
    176  0875 ????
    177  0875 ????
    178  0875 ????
    179  0875 ????
    180  0875 ????
    181  0875 ????
    182  0875 ????
    183  0875 ????
    184  0875 ????
    185  0875 ????
    186  0875 ????
    187  0875 ????
    188  0875 ????
    189  0875 ????
    190  0875 ????
    191  0875 ????
    192  0875 ????
    193  0875 ????
    194  0875 ????
    195  0875 ????
    196  0875 ????
    197  0875 ????
    198  0875 ????
    199  0875 ????
    200  0875 ????
    201  0875 ????
    202  0875 ????
    203  0875 ????
    204  0875 ????
    205  0875 ????
    206  0875 ????
    207  0875 ????
    208  0875 ????
    209  0875 ????
    210  0875 ????
    211  0875 ????
    212  0875 ????
    213  0875 ????
    214  0875 ????
    215  0875 ????
    216  0875 ????
    217  0875 ????
    218  0875 ????
    219  0875 ????
    220  0875 ????
    221  0875 ????
    222  0875 ????
    223  0875 ????
    224  0875 ????
    225  0875 ????
    226  0875 ????
    227  0875 ????
    228  0875 ????
    229  0875 ????
    230  0875 ????
    231  0875 ????
    232  0875 ????
    233  0875 ????
    234  0875 ????
    235  0875 ????
    236  0875 ????
    237  0875 ????
    238  0875 ????
    239  0875 ????
    240  0875 ????
    241  0875 ????
    242  0875 ????
    243  0875 ????
    244  0875 ????
    245  0875 ????
    246  0875 ????
    247  0875 ????
    248  0875 ????
    249  0875 ????
    250  0875 ????
    251  0875 ????
    252  0875 ????
    253  0875 ????
    254  0875 ????
    255  0875 ????
    256  0875 ????
    257  0875 ????
    258  0875 ????
    259  0875 ????
    260  0875 ????
    261  0875 ????
    262  0875 ????
    263  0875 ????
    264  0875 ????
    265  0875 ????
    266  0875 ????
    267  0875 ????
    268  0875 ????
    269  0875 ????
    270  0875 ????
    271  0875 ????
    272  0875 ????
    273  0875 ????
    274  0875 ????
    275  0875 ????
    276  0875 ????
    277  0875 ????
    278  0875 ????
    279  0875 ????
    280  0875 ????
    281  0875 ????
    282  0875 ????
    283  0875 ????
    284  0875 ????
    285  0875 ????
    286  0875 ????
    287  0875 ????
    288  0875 ????
    289  0875 ????
    290  0875 ????
    291  0875 ????
    292  0875 ????
    293  0875 ????
    294  0875 ????
    295  0875 ????
    296  0875 ????
    297  0875 ????
    298  0875 ????
    299  0875 ????
    300  0875 ????
    301  0875 ????
    302  0875 ????
    303  0875 ????
    304  0875 ????
    305  0875 ????
    306  0875 ????
    307  0875 ????
    308  0875 ????
    309  0875 ????
    310  0875 ????
    311  0875 ????
    312  0875 ????
    313  0875 ????
    314  0875 ????
    315  0875 ????
    316  0875 ????
    317  0875 ????
    318  0875 ????
    319  0875 ????
    320  0875 ????
    321  0875 ????
    322  0875 ????
    323  0875 ????
    324  0875 ????
    325  0875 ????
    326  0875 ????
    327  0875 ????
    328  0875 ????
    329  0875 ????
    330  0875 ????
    331  0875 ????
    332  0875 ????
    333  0875 ????
    334  0875 ????
    335  0875 ????
    336  0875 ????
    337  0875 ????
    338  0875 ????
    339  0875 ????
    340  0875 ????
    341  0875 ????
    342  0875 ????
    343  0875 ????
    344  0875 ????
    345  0875 ????
    346  0875 ????
    347  0875 ????
    348  0875 ????
    349  0875 ????
    350  0875 ????
    351  0875 ????
    352  0875 ????
    353  0875 ????
    354  0875 ????
    355  0875 ????
    356  0875 ????
    357  0875 ????
    358  0875 ????
    359  0875 ????
    360  0875 ????
    361  0875 ????
    362  0875 ????
    363  0875 ????
    364  0875 ????
    365  0875 ????
    366  0875 ????
    367  0875 ????
    368  0875 ????
    369  0875 ????
    370  0875 ????
    371  0875 ????
    372  0875 ????
    373  0875 ????
    374  0875 ????
    375  0875 ????
    376  0875 ????
    377  0875 ????
    378  0875 ????
    379  0875 ????
    380  0875 ????
    381  0875 ????
    382  0875 ????
    383  0875 ????
    384  0875 ????
    385  0875 ????
    386  0875 ????
    387  0875 ????
    388  0875 ????
    389  0875 ????
    390  0875 ????
    391  0875 ????
    392  0875 ????
    393  0875 ????
    394  0875 ????
    395  0875 ????
    396  0875 ????
    397  0875 ????
    398  0875 ????
    399  0875 ????
    400  0875 ????
    401  0875 ????
    402  0875 ????
    403  0875 ????
    404  0875 ????
    405  0875 ????
    406  0875 ????
    407  0875 ????
    408  0875 ????
    409  0875 ????
    410  0875 ????
    411  0875 ????
    412  0875 ????
    413  0875 ????
    414  0875 ????
    415  0875 ????
    416  0875 ????
    417  0875 ????
    418  0875 ????
    419  0875 ????
    420  0875 ????
    421  0875 ????
    422  0875 ????
    423  0875 ????
    424  0875 ????
    425  0875 ????
    426  0875 ????
    427  0875 ????
    428  0875 ????
    429  0875 ????
    430  0875 ????
    431  0875 ????
    432  0875 ????
    433  0875 ????
    434  0875 ????
    435  0875 ????
    436  0875 ????
    437  0875 ????
    438  0875 ????
    439  0875 ????
    440  0875 ????
    441  0875 ????
    442  0875 ????
    443  0875 ????
    444  0875 ????
    445  0875 ????
    446  0875 ????
    447  0875 ????
    448  0875 ????
    449  0875 ????
    450  0875 ????
    451  0875 ????
    452  0875 ????
    453  0875 ????
    454  0875 ????
    455  0875 ????
    456  0875 ????
    457  0875 ????
    458  0875 ????
    459  0875 ????
    460  0875 ????
    461  0875 ????
    462  0875 ????	       ff e4	   GETIN      =	$FFE4
    463  0875 ????	       e5 44	   CLRSCN     =	$E544
    464  0875 ????	       ab 1e	   PRNSTR     =	$AB1E
    465  0875 ????	       e5 66	   GOHOME     =	$E566
    466  0875 ????	       bd cd	   PRNINT     =	$BDCD
    467  0875 ????
    468  0875 ????
    469  0875 ????
    470  0875 ????	       00 d1	   CURSOR_PTR =	209
    471  0875 ????	       00 a2	   JIFFY_CLOCK =	162
    472  0875 ????	       02 86	   CRSRCOL    =	646
    473  0875 ????	       00 01	   MEMORY_CONFIG =	1
    474  0875 ????
    475  0875 ????
    476  0875 ????
    477  0875 ????	       00 00	   COLOR_BLACK =	0
    478  0875 ????	       00 01	   COLOR_WHITE =	1
    479  0875 ????	       00 02	   COLOR_RED  =	2
    480  0875 ????	       00 03	   COLOR_CYAN =	3
    481  0875 ????	       00 04	   COLOR_MAGENTA =	4
    482  0875 ????	       00 05	   COLOR_GREEN =	5
    483  0875 ????	       00 06	   COLOR_BLUE =	6
    484  0875 ????	       00 07	   COLOR_YELLOW =	7
    485  0875 ????
    486  0875 ????
    487  0875 ????
    488  0875 ????
    489  0875 ????	       00 28	   SCREEN_COLS =	40
    490  0875 ????	       00 19	   SCREEN_ROWS =	25
    491  0875 ????	       04 00	   VIDEO_RAM  =	1024
    492  0875 ????	       d8 00	   COLOR_RAM  =	55296
    493  0875 ????	       00 d4	   COLOR_PAGE_OFFSET =	((COLOR_RAM - VIDEO_RAM) / 256)
    494  0875 ????	       08 01	   BASIC_RAM  =	2049
    495  0875 ????	       d0 12	   RASTER     =	$D012
    496  0875 ????	       d0 00	   ROMCHAR    =	$D000
    497  0875 ????	       d0 20	   BORDER     =	53280
    498  0875 ????	       d0 21	   BACKGROUND =	53281
    499  0875 ????
    500  0875 ????
    501  0875 ????
    502  0875 ????
    503  0875 ????
    504  0875 ????
    505  0875 ????
    506  0875 ????
    507  0875 ????
    508  0875 ????
    509  0875 ????
    510  0875 ????
    511  0875 ????
    512  0875 ????
    513  0875 ????
    514  0875 ????
    515  0875 ????
    516  0875 ????
    517  0875 ????
    518  0875 ????
    519  0875 ????
    520  0875 ????
    521  0875 ????
    522  0875 ????
    523  0875 ????
    524  0875 ????
    525  0875 ????
    526  0875 ????
    527  0875 ????
    528  0875 ????
    529  0875 ????
    530  0875 ????
    531  0875 ????
    532  0875 ????
    533  0875 ????
    534  0875 ????
    535  0875 ????
    536  0875 ????
    537  0875 ????
    538  0875 ????
    539  0875 ????
    540  0875 ????
    541  0875 ????
    542  0875 ????
    543  0875 ????
    544  0875 ????
    545  0875 ????
    546  0875 ????
    547  0875 ????
    548  0875 ????
    549  0875 ????
    550  0875 ????
    551  0875 ????
    552  0875 ????
    553  0875 ????
    554  0875 ????
    555  0875 ????
    556  0875 ????
    557  0875 ????
    558  0875 ????
    559  0875 ????
    560  0875 ????
    561  0875 ????
    562  0875 ????	       ff e4	   GETIN      =	$FFE4
    563  0875 ????	       ff d2	   CHROUT     =	$FFD2
    564  0875 ????
    565  0801					      ORG	BASIC_RAM
    566  0801
    567  0801
    568  0801
    569  0801
    570  0801
    571  0801
    572  0801
    573  0801
    574  0801
    575  0801		       13 08 0a 00*BASIC_ROW_0 BYTE.b	[BASIC_ROW_1%256],[BASIC_ROW_1/256],[10%256],[10/256],153,32,199,40,49,52,41,170,34,5,147,34,59,0
    576  0813		       1f 08 28 00*BASIC_ROW_1 BYTE.b	[BASIC_ROW_2%256],[BASIC_ROW_2/256],[40%256],[40/256],158,32,[[[TERMINAL%100000]-[TERMINAL%10000]]/10000+$30],[[[TERMINAL%10000]-[TERMINAL%1000]]/1000+$30],[[[TERMINAL%1000]-[TERMINAL%100]]/100+$30],[[[TERMINAL%100]-[TERMINAL%10]]/10+$30],[[[TERMINAL%10]-[TERMINAL%1]]/1+$30],0
    577  081f		       00 00	   BASIC_ROW_2 BYTE.b	0,0
    578  0821
    579  0821				   TERMINAL
    580  0821		       ad f3 d7 	      LDA	MODEM_DATA_REQ
    581  0824				   IF_574_START
    582  0824		       c9 00		      CMP	#0
    583  0826		       f0 21		      BEQ	IF_574_ELSE
    584  0828		       20 64 08 	      JSR	CURSOR_OFF
    585  082b				   DO_576_START
    586  082b		       a2 00		      LDX	#0
    587  082d		       86 d4		      STX	$D4
    588  082f		       86 d8		      STX	$D8
    589  0831		       ad f0 d7 	      LDA	MODEM_DATA_IN
    590  0834		       20 d2 ff 	      JSR	CHROUT
    591  0837		       a9 00		      LDA	#0
    592  0839		       8d f1 d7 	      STA	MODEM_ACK
    593  083c		       a9 01		      LDA	#1
    594  083e		       8d f1 d7 	      STA	MODEM_ACK
    595  0841		       ad f3 d7 	      LDA	MODEM_DATA_REQ
    596  0844		       d0 e5		      BNE	DO_576_START
    597  0846				   DO_576_END
    598  0846
    599  0846		       20 5f 08 	      JSR	CURSOR_ON
    600  0849				   IF_574_ELSE
    601  0849				   IF_574_END
    602  0849
    603  0849		       20 e4 ff 	      JSR	GETIN
    604  084c				   IF_594_START
    605  084c		       c9 00		      CMP	#0
    606  084e		       f0 03		      BEQ	IF_594_ELSE
    607  0850		       8d f2 d7 	      STA	MODEM_DATA_OUT
    608  0853				   IF_594_ELSE
    609  0853				   IF_594_END
    610  0853
    611  0853
    612  0853		       ad f4 d7 	      LDA	MODEM_CONNST
    613  0856		       8d 20 d0 	      STA	53280
    614  0859		       8d 21 d0 	      STA	53281
    615  085c
    616  085c		       4c 21 08 	      JMP	TERMINAL
    617  085f
    618  085f
    619  085f
    620  085f
    621  085f				   CURSOR_ON
    622  085f		       a0 00		      LDY	#$00
    623  0861		       84 cc		      STY	$CC
    624  0863		       60		      RTS
    625  0864
    626  0864				   CURSOR_OFF
    627  0864		       a4 cc		      LDY	$CC
    628  0866				   IF_615_START
    629  0866		       d0 08		      BNE	IF_615_ELSE
    630  0868		       a0 01		      LDY	#$01
    631  086a		       84 cd		      STY	$CD
    632  086c				   DO_613_START
    633  086c		       a4 cf		      LDY	$CF
    634  086e		       d0 fc		      BNE	DO_613_START
    635  0870				   DO_613_END
    636  0870
    637  0870				   IF_615_ELSE
    638  0870				   IF_615_END
    639  0870		       a0 ff		      LDY	#$FF
    640  0872		       84 cc		      STY	$CC
    641  0874		       60		      RTS
    642  0875
